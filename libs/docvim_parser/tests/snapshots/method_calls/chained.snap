-- Fun fact: an initial version of this was written as:
--
--    local x = y:z():then():this(true)
--
-- We correctly rejecet that with UnexpectedToken (Keyword(Then)), in agreement
-- with luajit:
--
--    '<name>' expected near 'then'
--
-- Which is slightly surprising to me as I would have expected keywords to be
-- allowed in certain positions where they wouldn't be ambiguous.

y:z():followed_by():this(true)

↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓ OUTPUT ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓

Block(
    [
        Node {
            comments: [
                Comment {
                    content: "-- Fun fact: an initial version of this was written as:\n",
                },
                Comment {
                    content: "--\n",
                },
                Comment {
                    content: "--    local x = y:z():then():this(true)\n",
                },
                Comment {
                    content: "--\n",
                },
                Comment {
                    content: "-- We correctly rejecet that with UnexpectedToken (Keyword(Then)), in agreement\n",
                },
                Comment {
                    content: "-- with luajit:\n",
                },
                Comment {
                    content: "--\n",
                },
                Comment {
                    content: "--    '<name>' expected near 'then'\n",
                },
                Comment {
                    content: "--\n",
                },
                Comment {
                    content: "-- Which is slightly surprising to me as I would have expected keywords to be\n",
                },
                Comment {
                    content: "-- allowed in certain positions where they wouldn't be ambiguous.\n",
                },
            ],
            node: MethodCallStatement {
                pexp: MethodCall {
                    pexp: MethodCall {
                        pexp: NamedVar(
                            "y",
                        ),
                        name: "z",
                        args: [],
                    },
                    name: "followed_by",
                    args: [],
                },
                name: "this",
                args: [
                    True,
                ],
            },
        },
    ],
)
